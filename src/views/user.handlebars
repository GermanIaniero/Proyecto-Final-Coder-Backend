<!-- views/userTable.hbs -->

<nav
  class="navbar navbar-expand-lg navbar-dark bg-primary"
  style="padding: 10px 20px;"
>
  <div class="container-fluid">
    <a href="/">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="2em"
        viewBox="0 0 576 512"
      >
        <!-- Tu logotipo o icono aquÃ­ -->
      </svg>
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="/">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="2rem"
              viewBox="0 0 512 512"
            >
              <!-- Icono y texto de Menage -->
            </svg>
            <p>Home</p>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/api/products/realTimeProducts">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="2rem"
              viewBox="0 0 512 512"
            >
              <!-- Icono y texto de Menage -->
            </svg>
            <p>Manage</p>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/api/chat">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="2rem"
              viewBox="0 0 512 512"
            >
              <!-- Icono y texto de Support -->
            </svg>
            <p>Support</p>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/api/products/products">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="2rem"
              viewBox="0 0 576 512"
            >
              <!-- Icono y texto de Cart -->
            </svg>
            <p>Products</p>
          </a>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a href="/api/session/logout" style="margin-left:1rem;color:white;">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="2rem"
              viewBox="0 0 512 512"
            >
              <!-- Icono y texto de Logout -->
            </svg>
            <p>Logout</p>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Table</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-TM6c5cK8C1c3g8JdKt5H1Aiz5XsMpg3zY4h3S7eLBU4z/CXjq+qBUynd6cqzV"
      crossorigin="anonymous"
    />
  </head>
  <body class="container mt-5">
    <h1>User Table</h1>
    <table class="table table-responsive">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Email</th>
          <th>Age</th>
          <th>Role</th>
          <th>Cambiar rol</th>
          <th>Eliminar user</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
          <tr>
            <td>{{this.first_name}}</td>
            <td>{{this.last_name}}</td>
            <td>{{this.email}}</td>
            <td>{{this.age}}</td>
            <td>{{this.rol}}</td>
            <td><a href="/api/users/premium/{{this._id}}">Cambiar rol</a></td>
            <td><a href="/api/users/delete/{{this._id}}">Eliminar user</a></td>
          </tr>
        {{/each}}
      </tbody>
    </table>

    <button class="btn btn-danger" onclick="deleteUser('{{this._id}}')">Delete
      user last connection</button>

    <script>
      function deleteUser(userId) { console.log('Eliminar usuario con ID:',
      userId); fetch(`/api/users/`, { method: 'DELETE', headers: {
      'Content-Type': 'application/json', }, }) .then(response =>
      response.json()) .then(data => { console.log('Respuesta del servidor:',
      data); }) .catch(error => console.error('Error al eliminar usuario:',
      error)); }
    </script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-LzQeNl0fx3jtMFXtJsGdhdej1sAIVgmUxFbAfERiHQ8Z9XSOp6LqDrK//f95gP1I"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-NBXUoDcYVViNBHxhEIaZcL4PwDf9Npb6TsiBYb7CCtV+g4+Cv2tweF5TBDHjqzuO"
      crossorigin="anonymous"
    ></script>
  </body>
</html>